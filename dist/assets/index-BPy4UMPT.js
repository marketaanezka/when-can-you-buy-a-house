import{o as Y,n as p,b as K,s as v,a as J,c as O,g as le,r as g,j as t,u as Z,d as ue}from"./index-BjeMCeXp.js";import{u as de,m as fe,a as he,c as ee,b as te,g as xe,C as ge,M as me,d as pe,e as be,f as ve,S as je,h as ye,i as _e,j as Se,k as Ce,l as Ne,n as Ee,o as we,p as Me,L as Te}from"./Layout-DU4aJ6qJ.js";import"./clsx-B-dksMZM.js";const ke=Y({adult:K().default(!0),backdrop_path:v().nullish(),genre_ids:J(p()).nullish(),id:p().default(0),original_language:v(),original_title:v(),overview:v().nullish(),popularity:p().default(0),poster_path:v().nullish(),release_date:v().nullish(),title:v(),video:K().default(!0),vote_average:p().default(0),vote_count:p().default(0)}),Ie=Y({page:p().default(0),results:J(ke),total_pages:p().default(0),total_results:p().default(0)}),Oe=async(e,r)=>{const c=await(await he.get(`search/movie?query=${e}&page=${r}`)).json();return Ie.parse(c)},Re=(e,r)=>de({queryKey:[fe.searchResult,e,r],queryFn:()=>Oe(e,r)});var $,X;function Ve(){if(X)return $;X=1;var e="Expected a function",r=NaN,a="[object Symbol]",c=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,j=typeof O=="object"&&O&&O.Object===Object&&O,S=typeof self=="object"&&self&&self.Object===Object&&self,C=j||S||Function("return this")(),R=Object.prototype,V=R.toString,L=Math.max,D=Math.min,f=function(){return C.Date.now()};function re(n,d,x){var y,N,k,_,h,b,E=0,B=!1,w=!1,z=!0;if(typeof n!="function")throw new TypeError(e);d=q(d)||0,F(x)&&(B=!!x.leading,w="maxWait"in x,k=w?L(q(x.maxWait)||0,d):k,z="trailing"in x?!!x.trailing:z);function A(i){var m=y,M=N;return y=N=void 0,E=i,_=n.apply(M,m),_}function ae(i){return E=i,h=setTimeout(I,d),B?A(i):_}function ie(i){var m=i-b,M=i-E,W=d-m;return w?D(W,k-M):W}function G(i){var m=i-b,M=i-E;return b===void 0||m>=d||m<0||w&&M>=k}function I(){var i=f();if(G(i))return U(i);h=setTimeout(I,ie(i))}function U(i){return h=void 0,z&&y?A(i):(y=N=void 0,_)}function oe(){h!==void 0&&clearTimeout(h),E=0,y=b=N=h=void 0}function ce(){return h===void 0?_:U(f())}function P(){var i=f(),m=G(i);if(y=arguments,N=this,b=i,m){if(h===void 0)return ae(b);if(w)return h=setTimeout(I,d),A(b)}return h===void 0&&(h=setTimeout(I,d)),_}return P.cancel=oe,P.flush=ce,P}function F(n){var d=typeof n;return!!n&&(d=="object"||d=="function")}function ne(n){return!!n&&typeof n=="object"}function se(n){return typeof n=="symbol"||ne(n)&&V.call(n)==a}function q(n){if(typeof n=="number")return n;if(se(n))return r;if(F(n)){var d=typeof n.valueOf=="function"?n.valueOf():n;n=F(d)?d+"":d}if(typeof n!="string")return n===0?n:+n;n=n.replace(c,"");var x=s.test(n);return x||l.test(n)?o(n.slice(2),x?2:8):u.test(n)?r:+n}return $=re,$}var Le=Ve();const Q=le(Le);function De(e){const r=g.useRef(e);r.current=e,g.useEffect(()=>()=>{r.current()},[])}function Fe(e,r=500,a){const c=g.useRef();De(()=>{c.current&&c.current.cancel()});const u=g.useMemo(()=>{const s=Q(e,r,a),l=(...o)=>s(...o);return l.cancel=()=>{s.cancel()},l.isPending=()=>!!c.current,l.flush=()=>s.flush(),l},[e,r,a]);return g.useEffect(()=>{c.current=Q(e,r,a)},[e,r,a]),u}function ze(e,r,a){const c=(S,C)=>S===C,u=e instanceof Function?e():e,[s,l]=g.useState(u),o=g.useRef(u),j=Fe(l,r,a);return c(o.current,u)||(j(u),o.current=u),[s,j]}function Ae({className:e,type:r,...a}){return t.jsx("input",{type:r,"data-slot":"input",className:ee("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],$e=te("ChevronLeft",Pe);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qe=te("ChevronRight",He),T={HOME:"/",MOVIE:"/movie",MOVIE_DETAIL:e=>`${T.MOVIE}/${e}`},Be=({movie:e})=>{const r=Z(),a=()=>r({to:T.MOVIE_DETAIL(e.id)}),c=xe(e.vote_average);return t.jsxs(ge,{className:"overflow-hidden flex flex-col h-full pt-0 cursor-pointer",onClick:a,children:[t.jsx("div",{className:"h-64 relative overflow-hidden",children:t.jsx(me,{posterPath:e.poster_path,alt:e.title,className:"w-full h-full object-cover transition-transform hover:scale-105"})}),t.jsxs(pe,{children:[t.jsx(be,{className:"line-clamp-1",children:e.title}),t.jsxs(ve,{className:"flex items-center gap-1",children:[t.jsx(je,{className:"h-4 w-4 text- text-yellow-500"}),t.jsx("span",{className:c,children:e.vote_average.toFixed(1)}),t.jsxs("span",{className:"text-gray-400 text-xs",children:["(",e.vote_count," ",e.vote_count===1?"vote":"votes",")"]})]})]}),t.jsxs(ye,{className:"flex-grow",children:[t.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center gap-1",children:[t.jsx(Se,{className:"h-4 w-4"}),_e(e.release_date)]}),e.genre_ids&&e.genre_ids.length>0&&t.jsx("p",{className:"text-xs text-gray-400 mb-3",children:Ce(e.genre_ids)}),t.jsx("p",{className:"text-sm line-clamp-3",children:e.overview})]})]},e.id)},Ge=({movies:e})=>!e||e.length===0?t.jsx("div",{className:"text-center text-2xl font-bold flex justify-center items-center mt-8",children:"No results found"}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:e.map(r=>t.jsx(Be,{movie:r},r.id))}),Ue=Ee("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function H({className:e,variant:r,size:a,asChild:c=!1,...u}){const s=c?Ne:"button";return t.jsx(s,{"data-slot":"button",className:ee(Ue({variant:r,size:a,className:e})),...u})}const We=5,Ke=({page:e,setPage:r,totalPages:a})=>{const u=(()=>{const s=[];if(a<=1)return[];if(a<=We){for(let o=1;o<=a;o++)s.push(o);return s}s.push(1),e>3&&s.push("…");const l=[];for(let o=Math.max(2,e-1);o<=Math.min(a-1,e+1);o++)l.push(o);return s.push(...l),e<a-2&&s.push("…"),s.push(a),s})();return t.jsxs("div",{className:"flex justify-center items-center gap-2 mt-8 mb-8",children:[t.jsx(H,{variant:"outline",size:"icon",onClick:()=>r(e-1),disabled:e===1,"aria-label":"Go to previous page",children:t.jsx($e,{size:18})}),u.map((s,l)=>typeof s=="number"?t.jsx(H,{variant:e===s?"default":"outline",onClick:()=>r(s),children:s},l):t.jsx("span",{className:"px-2",children:s},l)),t.jsx(H,{variant:"outline",size:"icon",onClick:()=>r(e+1),disabled:e>=a,"aria-label":"Go to next page",children:t.jsx(qe,{size:18})})]})},Xe=()=>{const e=Z(),r=ue({from:T.HOME}),[a,c]=g.useState(r.search??""),[u,s]=g.useState(Number(r.page??1)),[l]=ze(a,Me),{data:o,error:j,isError:S,isPending:C}=Re(l,u),R=l.trim().length===0,V=f=>{s(f),e({to:T.HOME,search:{...r,page:f}})},L=f=>{c(f),s(1),e({to:T.HOME,search:{search:f,page:1}})};if(S)throw j;const D=()=>C?t.jsx(we,{className:"h-96"}):R?t.jsx("div",{className:"flex justify-center items-center mt-8 text-center text-xl text-gray-600",children:"Enter a movie title to search"}):t.jsxs(t.Fragment,{children:[t.jsx(Ge,{movies:o.results}),o.results.length>0&&t.jsx(Ke,{page:u,setPage:V,totalPages:o.total_pages})]});return t.jsxs("div",{className:"w-full mx-auto px-4 py-8 min-h-screen",children:[t.jsxs("header",{className:"mb-8 flex flex-col items-center",children:[t.jsx("h1",{className:"text-3xl font-bold text-center mb-8",children:"TMDB Movie Search"}),t.jsx(Ae,{value:a,onChange:f=>L(f.target.value),type:"text",placeholder:"Search movie",autoFocus:!0,className:"w-2/3","aria-label":"Search movie"})]}),D()]})},Qe=()=>t.jsx(Te,{children:t.jsx(Xe,{})}),et=Qe;export{et as component};
